<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Map</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }
    canvas {
      display: block;
      background: #f9f9f9;
    }
  </style>
</head>
<body>
<canvas id="myCanvas"></canvas>

<script>
  const canvas = document.getElementById("myCanvas");
  const ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  let offsetX = 0;
  let offsetY = 0;
  let scale = 1;

  let isDragging = false;
  let startX, startY;

  canvas.addEventListener("mousedown", (e) => {
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
  });

  canvas.addEventListener("mousemove", (e) => {
    if (isDragging) {
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      startX = e.clientX;
      startY = e.clientY;
      offsetX += dx;
      offsetY += dy;
      draw();
    }
  });

  canvas.addEventListener("mouseup", () => isDragging = false);
  canvas.addEventListener("mouseleave", () => isDragging = false);

  canvas.addEventListener("wheel", (e) => {
    e.preventDefault();

    const zoomFactor = 1.1;
    const mouseX = e.clientX;
    const mouseY = e.clientY;

    const wheel = e.deltaY < 0 ? 1 : -1;
    const zoom = wheel > 0 ? zoomFactor : 1 / zoomFactor;

    const x = (mouseX - offsetX) / scale;
    const y = (mouseY - offsetY) / scale;

    scale *= zoom;

    offsetX = mouseX - x * scale;
    offsetY = mouseY - y * scale;

    draw();
  });

  function drawRoom(n, s, e, w, cx, cy, roomSide, hallLength, hallWidth, wLine, color) {
    // rooms are roomSide x roomSide not including halls
    // roomside, hallwidth, and wLine should be even
    // cx, cy should be upper left corner of room
    // offset between rooms is 2 * hallLength + roomSide

    if(n == 1) {

      ctx.moveTo(cx, cy);
      ctx.lineTo(cx + (roomSide / 2 - hallWidth / 2), cy);
      ctx.lineTo(cx + (roomSide / 2 - hallWidth / 2), cy - hallLength);

      ctx.moveTo(cx + (roomSide / 2 + hallWidth / 2), cy - hallLength);
      ctx.lineTo(cx + (roomSide / 2 + hallWidth / 2), cy);
      ctx.lineTo(cx + roomSide, cy);
    } else{
      ctx.moveTo(cx, cy);
      ctx.lineTo(cx + roomSide, cy);
    }
    if(s == 1) {
      ctx.moveTo(cx, cy + roomSide);
      ctx.lineTo(cx + (roomSide / 2 - hallWidth / 2), cy + roomSide);
      ctx.lineTo(cx + (roomSide / 2 - hallWidth / 2), cy + roomSide + hallLength);

      ctx.moveTo(cx + (roomSide / 2 + hallWidth / 2), cy + roomSide + hallLength);
      ctx.lineTo(cx + (roomSide / 2 + hallWidth / 2), cy + roomSide);
      ctx.lineTo(cx + roomSide, cy + roomSide);

    } else {
      ctx.moveTo(cx, cy + roomSide);
      ctx.lineTo(cx + roomSide, cy + roomSide);
    }
    if(e == 1) {
      // y off by wLine / 2 to account for lineWidth size
      ctx.moveTo(cx + roomSide, cy - wLine / 2);
      ctx.lineTo(cx + roomSide, cy + (roomSide / 2 - hallWidth / 2));
      ctx.lineTo(cx + roomSide + hallLength, cy + (roomSide / 2 - hallWidth / 2));

      ctx.moveTo(cx + roomSide + hallLength, cy + (roomSide / 2 + hallWidth / 2));
      ctx.lineTo(cx + roomSide, cy + (roomSide / 2 + hallWidth / 2));
      ctx.lineTo(cx + roomSide, cy + roomSide + wLine / 2);
    } else {
      ctx.moveTo(cx + roomSide, cy - wLine / 2);
      ctx.lineTo(cx + roomSide, cy + roomSide + wLine / 2);
    }
    if(w == 1) {
      // y off by 2 to account for lineWidth = 4
      ctx.moveTo(cx, cy - wLine / 2);
      ctx.lineTo(cx, cy + (roomSide / 2 - hallWidth / 2));
      ctx.lineTo(cx - hallLength, cy + (roomSide / 2 - hallWidth / 2));

      ctx.moveTo(cx - hallLength, cy + (roomSide / 2 + hallWidth / 2));
      ctx.lineTo(cx, cy + (roomSide / 2 + hallWidth / 2));
      ctx.lineTo(cx, cy + roomSide + wLine / 2);

    } else {
      ctx.moveTo(cx, cy - wLine / 2);
      ctx.lineTo(cx, cy + roomSide + wLine / 2);
    }
    ctx.lineWidth = wLine;
    ctx.strokeStyle = color;
  }

  function draw() {
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.setTransform(scale, 0, 0, scale, offsetX, offsetY);

    ctx.beginPath();
    ctx.stroke();
  }
  draw();
</script>
</body>
</html>